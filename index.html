<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

<style>
.option > img {
	max-height: 100px
}
.option {
	margin: 10px;
}
nav {
	display: flex;
    justify-content: center;
}
.display {
	position: absolute;
	margin-left: auto;
	margin-right: auto;
	left: 0;
	right: 0;
	max-width: 100%;
	height: 80%;
	margin-top: 10%
}
</style>

<img class = 'display' src="windows_screenshot.jpg">

<nav>
	<div class = 'option'>
		<img src="./windows_screenshot.jpg">
	</div>
	<div class = 'option'>
		<img src="windows_screenshot.jpg">
	</div>
	<div class = 'option'>
		<img src="windows_screenshot.jpg">
	</div>
</nav>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>  
<script>
	$(document).ready(function() {
    var connection = new WebSocket('ws://10.30.3.126:23456');
    // var connection = new WebSocket('ws://127.0.0.1:23457');
    let same = false

    // connection.onopen = function () {
    //   console.log("betsa")
    //   // connection is opened and ready to use
    //   same = true
    //   console.log("I'm going to log some data", data);
    //   connection.send(JSON.stringify(data))
    // };

    connection.addEventListener('open', function (event) {
      // console.log("I'm in the event listener now...");
      // connection.send('!!!!!!!!!!Hello Server!!!!!!!!!!!!!!');
      // connection.send(JSON.stringify(data))
    });

    $("img").on("click", function(event) {
      var x = event.pageX - this.offsetLeft;
      var y = event.pageY - this.offsetTop;
      console.log("User clicks")
    	// console.log(this.width, x/this.width)
    	// console.log(this.height, y/this.height)
    	const data = [x/this.width, y/this.height]
		  console.log(JSON.stringify(data))
      console.log('[INFO] ready state: ', connection.readyState)
      connection.send(JSON.stringify(data))

      connection.onerror = function (error) {
        console.log("alpha")
        // an error occurred when sending/receiving data
      };

      connection.onmessage = function (message) {
        console.log(JSON.stringify(data))
        // try to decode json (I assume that each message
        // from server is json)
        try {
          var json = JSON.parse(message.data);
          console.log(json)
        } catch (e) {
          console.log('This doesn\'t look like a valid JSON: ',
              message.data);
          return;
        }
        // handle incoming message
      };
    });
});

</script>
</html>